<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dlhdlh.mapper.WorkLogMapper">
	<select id="GetWorkLogList" parameterType="com.dlhdlh.dto.WorkLogDto" resultType="com.dlhdlh.dto.WorkLogDto">
		<![CDATA[ 
			SELECT w.idx, w.title, w.content, w.insert_dt, w.insert_user, w.cust_cd, c.cust_nm, DATE_FORMAT(w.receipt_dt, '%Y-%m-%d %h:%m') as receipt_dt, DATE_FORMAT(w.due_dt, '%Y-%m-%d %h:%m') as due_dt, DATE_FORMAT(w.compl_dt, '%Y-%m-%d %h:%m') as compl_dt  
			FROM WorkLog w 
			LEFT OUTER JOIN Customer c 
			ON w.cust_cd = c.cust_cd 
			WHERE w.deleted_yn = "N" AND w.insert_user = #{userId} AND w.compl_yn like concat('%', #{complYn}, '%') AND title like concat('%', #{title}, '%') AND cust_nm like  concat('%', #{custNm}, '%')
			ORDER BY ${order1} ${order2}
		]]>
	</select>
</mapper >